---
title: Accounts
description: "Register, view and update account info, rotate secret. Base URL: https://api.nexalayer.net/v1"
---

# Accounts

Agent accounts are created via `POST /account/register`. Each agent has a 1:1 mapping to a backend user for billing and orders.

## Register

Creates an agent and returns `api_key` and `api_secret`. New agents receive a trial balance (e.g. ¥5) for testing.

**用户注册**：注册时可填写**推荐码**（可选）。若提供有效推荐码，账号将归属至该推荐代理商；若不填或推荐码无效，将归属默认代理商。无效推荐码会返回 400 错误。

**示例 curl（推荐码可选）**：注册接口为 `POST /v1/account/register`（部分环境路径为 `/v1/auth/register`，以实际为准）。

```bash
curl -X POST https://api.nexalayer.net/v1/account/register \
  -H "Content-Type: application/json" \
  -d '{"name":"My Agent","contact_email":"dev@example.com","referral_code":"0345"}'
```

<CodeGroup>

```bash Request (without referral code)
curl -X POST "https://api.nexalayer.net/v1/account/register" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "My AI Agent",
    "contact_email": "agent@example.com",
    "webhook_url": "https://my-server.com/webhook"
  }'
```

```bash Request (with referral code)
curl -X POST "https://api.nexalayer.net/v1/account/register" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "My AI Agent",
    "contact_email": "agent@example.com",
    "referral_code": "0345"
  }'
```

```json Response
{
  "success": true,
  "data": {
    "agent_id": 1,
    "name": "My AI Agent",
    "api_key": "ak_a1b2c3d4e5f6g7h8",
    "api_secret": "sk_x9y8z7w6v5u4t3s2r1q0...",
    "status": "active",
    "referral": {
      "agent_id": 123,
      "agent_name": "yijivip"
    },
    "trial": {
      "is_trial": true,
      "trial_balance": 5.00,
      "trial_expires_at": "2026-03-17T10:00:00Z"
    },
    "created_at": "2026-02-15T10:00:00Z"
  }
}
```

</CodeGroup>

### Request body

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `name` | string | Yes | Agent name (2–100 chars). |
| `contact_email` | string | No | Contact email. |
| `webhook_url` | string | No | Webhook URL for event notifications. |
| `description` | string | No | Description (max 500 chars). |
| `referral_code` | string | No | Referral code from an agent. If valid, the account is assigned to that agent. If invalid, returns 400 error. If omitted, assigned to the default agent (openAgent). |

### Response fields

| Field | Description |
|-------|-------------|
| `api_key` | Use in `X-API-Key` for all authenticated requests. |
| `api_secret` | Only needed for JWT; returned once — store securely. |
| `referral` | Present when a valid `referral_code` was provided. Contains the assigned agent info. |
| `trial` | Trial balance and expiry; no recharge required to try sessions. |

## Get account info

<CodeGroup>

```bash Request
curl -X GET "https://api.nexalayer.net/v1/account/info" \
  -H "X-API-Key: <api_key>"
```

```json Response
{
  "success": true,
  "data": {
    "agent_id": 1,
    "name": "My AI Agent",
    "status": "active",
    "total_sessions": 0,
    "active_sessions": 0,
    "max_active_sessions": 100,
    "rate_limit": { "per_minute": 60 },
    "auth_mode": "api_key_only",
    "contact_email": "agent@example.com",
    "webhook_url": "https://my-server.com/webhook"
  }
}
```

</CodeGroup>

## Update account info

<CodeGroup>

```bash Request
curl -X PUT "https://api.nexalayer.net/v1/account/info" \
  -H "X-API-Key: <api_key>" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Updated Agent Name",
    "webhook_url": "https://new-server.com/webhook"
  }'
```

</CodeGroup>

## Rotate secret

Invalidates the current `api_secret` and issues a new one (if your implementation returns it). Does not affect `api_key` or API-Key-only usage.

```bash
curl -X POST "https://api.nexalayer.net/v1/account/rotate-secret" \
  -H "X-API-Key: <api_key>"
```

After rotation, any existing JWT obtained with the old secret will be invalid; use the new secret to obtain a new token.

Next: [Products](/products), [Sessions](/sessions/overview).
